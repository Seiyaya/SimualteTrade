<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.seiyaya.stock.trade.mapper.AccountMapper">
	<!-- 实体和数据库映射关系 -->
	<resultMap type="Account" id="account">
		<result property="accountId"  column="account_id"/>
        <result property="accountName"  column="account_name"/>
        <result property="accountType"  column="account_type"/>
        <result property="userId"  column="user_id"/>
        <result property="moneyId"  column="money_id"/>
        <result property="initBalance"  column="init_balance"/>
        <result property="currentBalance"  column="current_balance"/>
        <result property="freezedBalance"  column="freezed_balance"/>
        <result property="totalAssets"  column="total_assets"/>
        <result property="totalMarket"  column="total_market"/>
        <result property="createDate"  column="create_date"/>
        <result property="updateDate"  column="update_date"/>
        <result property="remark"  column="remark"/>
        <result property="state"  column="state"/>
        <result property="version"  column="version"/>
	</resultMap>
	
	<select id="queryAccount" parameterType="HashMap" resultType="Account">
		select * from t_sim_account where account_id = #{account_id}
	</select>
	
	<update id="updateCurrentBalance" parameterType="HashMap">
		update t_sim_account set current_balance = current_balance + #{total_balance},version = #{new_version} 
		where account_id = #{account_id}
			and version = #{version}
	</update>
</mapper>